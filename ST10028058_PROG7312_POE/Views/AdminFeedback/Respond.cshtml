@model ST10028058_PROG7312_POE.Controllers.AdminRespondVm
@{
    ViewData["Title"] = "Respond to Feedback";
}
<div class="card shadow-sm rounded">
    <div class="card-body">
        <h2 class="card-title mb-3">@ViewData["Title"]</h2>

        <div class="alert alert-light border rounded shadow-sm mb-4">
            <div class="row">
                <div class="col-md-6">
                    <div><strong>Issue:</strong> @Model.IssueLocation</div>
                    <div><strong>Category:</strong> <span class="badge rounded-pill text-bg-info">@Model.IssueCategory</span></div>
                    <div><strong>Reported by:</strong> @Model.CitizenUserId</div>
                    <div><strong>Issue submitted:</strong> <span class="badge text-bg-secondary">@Model.IssueSubmittedAt.ToString("yyyy-MM-dd HH:mm")</span></div>
                </div>
                <div class="col-md-6">
                    <div><strong>Feedback submitted:</strong> <span class="badge text-bg-secondary">@Model.SubmittedAt.ToString("yyyy-MM-dd HH:mm")</span></div>
                    <div><strong>Rating:</strong> <span class="badge rounded-pill text-bg-primary">@Model.Rating</span></div>
                    <div><strong>Citizen comment:</strong> @(string.IsNullOrWhiteSpace(Model.Comment) ? "-" : Model.Comment)</div>
                </div>
            </div>
        </div>

        <form asp-action="Respond" method="post" novalidate>
            @Html.AntiForgeryToken()
            <input type="hidden" asp-for="FeedbackId" />
            <input type="hidden" asp-for="IssueId" />
            <input type="hidden" asp-for="IssueSubmittedAt" />
            <input type="hidden" asp-for="SubmittedAt" />

            <div class="mb-3">
                <label asp-for="AdminResponse" class="form-label">Admin response</label>
                <textarea asp-for="AdminResponse" rows="4" class="form-control" placeholder="Write your response to the citizen..."></textarea>
                <span asp-validation-for="AdminResponse" class="text-danger"></span>
            </div>

            <div class="mb-3">
                <label asp-for="ResponseTimeMinutes" class="form-label">Response time (minutes)</label>
                <input asp-for="ResponseTimeMinutes" class="form-control" placeholder="Leave blank to auto-estimate from issue submit to now" />
                <span class="form-text">If left blank, we’ll auto-calc from the issue submission time.</span>
                <span asp-validation-for="ResponseTimeMinutes" class="text-danger"></span>
            </div>

            <div class="d-flex gap-2">
                <button class="btn btn-primary" type="submit">Save response</button>
                <a class="btn btn-outline-secondary" asp-action="Index">Cancel</a>
            </div>
        </form>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}



@* 
//# Assistance provided by ChatGPT
//# Code and support generated with the help of OpenAI's ChatGPT.
// code attribution
// W3schools
//https://www.w3schools.com/cs/index.php

// code attribution
//Bootswatch
//https://bootswatch.com/

// code attribution
// https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-mvc-app/start-mvc?view=aspnetcore-8.0&tabs=visual-studio

// code attribution
// https://learn.microsoft.com/en-us/aspnet/core/security/authentication/identity?view=aspnetcore-8.0&tabs=visual-studio *@